<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:pm="http://primefaces.org/mobile"
	xmlns:pt="http://xmlns.jcp.org/jsf/passthrough">
<ui:composition template="../template/common.xhtml">
	<ui:define name="content">
		<pm:page id="search-main">
			<pm:header title="서울도서관통합검색">
				<f:facet name="left">
					<p:link outcome="pm:search-main">
						<p:graphicImage url="/assets/images/siis_logo.svg" height="14px" />
					</p:link>
				</f:facet>
				<f:facet name="right">
					<p:button value="지역설정" outcome="pm:setting-region" />
				</f:facet>
			</pm:header>

			<pm:content>
				<h:panelGroup style="text-align: center;" layout="block">
					<p:link outcome="/pages/search-main.jsf">
						<p:graphicImage url="/assets/images/siis_logo.svg" height="100px"
							width="240px" />
					</p:link>
				</h:panelGroup>
				<h:form id="search-form">
					<pm:field>
						<p:inputText id="search-main-word" type="search"
							value="#{bookHandler.searchWord}" />
						<p:selectOneMenu value="#{bookHandler.selectedSearchType}">
							<f:selectItems value="#{bookHandler.searchTypes}"
								var="searchType" itemValue="#{searchType.code}"
								itemLabel="#{searchType.label}" />
						</p:selectOneMenu>
						<p:commandButton id="main-search-button" value="검색"
							update="search-result:search-result-form"
							action="#{bookHandler.searchBookAction}" />
					</pm:field>
				</h:form>
			</pm:content>
		</pm:page>

		<pm:page id="search-result">
			<pm:header title="검색결과">
				<f:facet name="left">
					<p:link href="/">
						<p:graphicImage url="/assets/images/siis_logo.svg" height="14px" />
					</p:link>
				</f:facet>
				<f:facet name="right">
					<p:button value="지역설정" outcome="pm:setting-region" />
				</f:facet>
			</pm:header>

			<pm:content>
				<h:form id="search-result-form">
					<p:dataList id="search-result-table" value="#{bookHandler.books}"
						var="book" pt:data-inset="true" paginator="true"
						paginatorPosition="bottom" rows="20">
						<f:facet name="header">
                            #{bookHandler.searchWord} - 조회수 : #{bookHandler.books.size()} 건
                        </f:facet>
						<p:link href="#{book.infoUrl}"
							actionListener="#{bookHandler.bookSelectActionListener(book)}">
							<h2>제목 : #{book.title}</h2>

							<p>저자 : #{book.author}</p>

							<p>위치 : #{book.library.name}</p>

							<p>출판사 : #{book.publisher}</p>
						</p:link>
					</p:dataList>
				</h:form>
			</pm:content>
		</pm:page>

		<pm:page id="setting-region"
			style="background:url(/siis/assets/images/love_sarah.png) no-repeat;background-size: 100% 100%;">
			<pm:header title="검색 지역 설정">
				<f:facet name="left">
					<p:link outcome="pm:search-main">
						<p:graphicImage url="/assets/images/siis_logo.svg" height="14px" />
					</p:link>
				</f:facet>
				<f:facet name="right">
					<p:button outcome="pm:search-main" value="되돌아가기" />
				</f:facet>
			</pm:header>
			<pm:content>
				<pm:field>
				</pm:field>
			</pm:content>
		</pm:page>
	</ui:define>
</ui:composition>
</html>
